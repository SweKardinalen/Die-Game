#include <iostream>
#include <ctime>
#include <string>
#include <windows.h> 
using namespace std;

int main()
{
	setlocale(LC_ALL, "");			//Skapar Svenska bokstäver i terminalen

　
	string namn;
	char tecken;
	double PersonPott = 0;
	int bet1;
	srand(time(0));
	
	int slumptal1 = 0;			// Genererar ett random tärningsslag för deltagare & cpu
	int slumptal2 = 0;	
	int slumptal3 = 0;
	int slumptal4 = 0;

	double summa; //Gammal uträknings funtion
	int oavgjort; //Gammal uträknings funtion
	int Avinst = 0;
	int Cvinst = 0;

	//Välkomst meddelande
	cout << endl << endl << endl;
	cout << "Välkommen!" << endl;
	cout << endl << endl << endl;
	//Skriv in namn
	cout << "Var snäll och skriv in ditt namn: ";

	cin >> namn;

	system("cls");   //Clear screen

	cout << endl << "Hejsan " << namn << endl << endl;

	cout << "Din nuvarande PersonPott ligger på: " << PersonPott << endl;
	
	
		//Ger val om man vill sätta in pengar på kontot
		cout << "Vill du sätta in pengar på kontot?(j/n): ";
		cin >> tecken;

　
		if ((tecken == 'j') || (tecken == 'J'))
		{

　
			cout << "Var Vänlig och skriv in det belopp som du vill sätta in: ";
			cin >> PersonPott;

			if (PersonPott < 5001)
			{
				cout << "Du har nu " << PersonPott << "kr på ditt konto" << endl;

				Sleep(1000);
				system("cls");
			}
			
		}

		//Hör till det ovanför
		else
		{
			cout << "Okej, ditt nuvarande belopp är " << PersonPott << endl;
			
			cout << "Var Vänlig och skriv in det belopp som du vill sätta in: ";
			cin >> PersonPott;
			

		}
	
		cout << "Vill du starta spelet? (j/n) ";
		cin >> tecken;
		//LOOP för att köra till flera 
		while (true)
		{

　
			if ((tecken == 'j') || (tecken == 'J'))
			{
// Rond startar
				cout << endl << endl << endl;
				cout << "##########################" << endl;
				cout << "#######ROND STARTAR#######" << endl;
				cout << "##########################" << endl;
				cout << "########BÄST AV 3#########" << endl;
				cout << "##########################" << endl;
// insättnings funktionen

　
				cout << "Var vändlig och välj insättning (100 - 500kr): ";
				cin >> bet1;

				if ((bet1 == 100)||(bet1==300)||(bet1==500))
				{
					system("cls"); // clear screen

					cout << "Du valde att sätta in: " << bet1 << ". Är detta korrekt belopp? (j/n)";
					cin >> tecken;
					system("cls");
				}
// Förklarar ifall talet är felaktigt
				else

				{
					cout << "Talet som är inmatat är felaktigt" << endl;

					cout << "Var vändlig och välj insättning (100 - 500kr): ";
					cin >> bet1;

					system("cls");

　
				}
			
			
			
			}

　
　
　
//definerar spelpot till 0
		double spel_pot = 0;

//indikerar att ifall man väljer j/J så händer detta

		if ((tecken == 'j') || (tecken == 'J'))

		{

//Visar vilka bets som är inne och vad personen har i sin egna pott
			int diff = 500;
			diff = diff - bet1;
			int bet2 = rand() %  (diff + bet1); 			// Genererar ett random insättning mellan 100-500
			cout << "##############################" << endl;
			cout << "#### Bets som är inne är: ####" << endl;
			cout << "##############################" << endl <<endl;
			
			cout << namn << "s " << "insättning: " << bet1 << endl << endl;
			
			cout << "CPUns insättning: " << bet2 << endl << endl;

			PersonPott -= bet1;
			cout << "Din personliga pott ligger på: " << PersonPott << endl << endl;

// räknar ut spelpotten

			spel_pot = bet1 + bet2;

　
			cout << "Den totala spelpotten ligger på: " << spel_pot << endl << endl;

//pausar systemet för att tydligare visa spelstart
			system("pause");

		}
//Spel start
		cout << endl << endl << endl << "TÄRNINGARNA  SLÅS!" << endl << endl << endl;
		
		slumptal1 = rand() % 6 + 1;
		slumptal2 = rand() % 6 + 1;
		slumptal3 = rand() % 6 + 1;
		slumptal4 = rand() % 6 + 1;

		Sleep(1000);

　
		cout << namn << "s tärningar är: " << slumptal1 << " och " << slumptal2 << endl << endl;

		Sleep(1000);

		cout << "CPUns tärningar är: " << slumptal3 << " och " << slumptal4 << endl << endl;

		Sleep(1000);

// Ifall spelarens tal är större
		if ((slumptal1 > slumptal3)|| (slumptal2 > slumptal4)||(slumptal1 > slumptal4)||(slumptal2 > slumptal3))
		{
			cout <<endl << namn <<" vann denna rond!" << endl;
			PersonPott += spel_pot;
			cout << "Din personliga pott ligger nu på: " << PersonPott << endl;
			Avinst  += 1;
		}

　
//Ifall det blir oavgjort, skall fyllas i med bet1 + personpott
		else if ((slumptal1 == slumptal4)||(slumptal2 == slumptal3)||(slumptal1 == slumptal3)||(slumptal2 == slumptal4))
		{
			cout << "Ingen vinnare" << endl;

			PersonPott += bet1;

			cout << "Din personliga pott ligger återligen på: " << PersonPott << endl;

		}

// Ifall CPUns tal är större
		else
		{
			cout << "CPUn är vann denna rond" << endl;

			spel_pot -= spel_pot;
			Cvinst += 1;

		}
//Räknar ut ifall användare har 3 vunna ronder
		if (Avinst == 2)
		{
			system("cls");

			cout << namn << " vann matchen!" << endl;
			cout << "Din Personliga pott slutade på: " << PersonPott << endl;
			break;
		}
//räknar ut ifall CPU har 3 vunna ronder
		else if (Cvinst == 2)
		{
			system("cls");

			cout <<"CPUn Vann matchen, bättre lycka nästa gång!" << endl;
			
			break;
		}

	}

}
